<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile</title>

    <link rel="stylesheet" href="style1.css">
</head>
<body>
    <%- include('./partials/header.ejs') %>
    <div class="holder">
        <div class="big-container">
            <div class="photo"><img src="/profilephotos/<%= myusers.photo %>" alt = " profile photo"></div>
            <div class="infoheading"><%= myusers.username %></div>
        </div>

        <div class="info-container">
            <div class="labels">
                <h3> Name: </h3>
                <h3> Username: </h3>
                <h3> Email: </h3>
            </div>
    
            <div class="boxes">
                <input type="text" value="<%= myusers.fullname%>" name="myname" id="myname">
                <input type="text" value = "<%= myusers.username%>" name="myusername" id="myusername">
                <input type="email" value="<%= myusers.email%>" name="myemail" id="myemail">
            </div>
        </div>

        <div class="save">Update Profile</div>
    </div>

    <script>
        //FOR UPDATE
        const userid = document.querySelector('.welcome').id;
        const saveit = document.querySelector('.save');
        saveit.addEventListener('click',async (e)=>{
            e.preventDefault();
            const myname = document.querySelector('#myname').value;
            const myusername = document.querySelector('#myusername').value;
            const myemail = document.querySelector('#myemail').value;
            const res = await fetch ('/profile/update', {
                method:'POST',
                body: JSON.stringify({userid,myname,myusername,myemail}),
                headers:{
                    'Content-Type' : 'application/json',
                    'Accept': 'application/json'
                },
            });
            location.assign('/profile');
        })

    </script>

</body>
</html>